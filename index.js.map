{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["/**\n * XPERT TERM - FINAL JS ENGINE (Vanilla)\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    // 1. Инициализация иконок\n    lucide.createIcons();\n\n    // 2. Инициализация Lenis (Плавный скролл)\n    const lenis = new Lenis();\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // 3. Мобильное меню\n    const burger = document.getElementById('burger');\n    const mobileMenu = document.getElementById('mobile-menu');\n    const menuLinks = document.querySelectorAll('.mobile-menu__link');\n\n    const toggleMenu = () => {\n        burger.classList.toggle('burger--active');\n        mobileMenu.classList.toggle('mobile-menu--active');\n        document.body.style.overflow = mobileMenu.classList.contains('mobile-menu--active') ? 'hidden' : '';\n    };\n\n    burger.addEventListener('click', toggleMenu);\n    menuLinks.forEach(link => link.addEventListener('click', toggleMenu));\n\n    // 4. Reveal Animation (Intersection Observer)\n    const initReveal = () => {\n        const observer = new IntersectionObserver((entries) => {\n            entries.forEach(entry => {\n                if (entry.isIntersecting) {\n                    entry.target.classList.add('reveal--active');\n                }\n            });\n        }, { threshold: 0.1 });\n\n        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));\n    };\n\n    // 5. Hero Parallax\n    const initParallax = () => {\n        const hero = document.querySelector('.hero');\n        const card = document.querySelector('.viz__card');\n        if (!hero || !card) return;\n\n        hero.addEventListener('mousemove', (e) => {\n            const x = (window.innerWidth / 2 - e.pageX) / 30;\n            const y = (window.innerHeight / 2 - e.pageY) / 30;\n            card.style.transform = `rotateY(${x}deg) rotateX(${y}deg)`;\n        });\n    };\n\n    // 6. Card Glow Effect\n    const initCardGlow = () => {\n        const cards = document.querySelectorAll('.about-card, .contact__form-wrapper');\n        cards.forEach(card => {\n            card.addEventListener('mousemove', (e) => {\n                const rect = card.getBoundingClientRect();\n                card.style.setProperty('--mouse-x', `${e.clientX - rect.left}px`);\n                card.style.setProperty('--mouse-y', `${e.clientY - rect.top}px`);\n            });\n        });\n    };\n\n    // 7. Counters (Count Up)\n    const initCounters = () => {\n        const counterObserver = new IntersectionObserver((entries) => {\n            entries.forEach(entry => {\n                if (entry.isIntersecting) {\n                    const target = entry.target;\n                    const goal = parseInt(target.getAttribute('data-target'));\n                    let current = 0;\n                    const step = goal / 100;\n                    const update = () => {\n                        current += step;\n                        if (current < goal) {\n                            target.innerText = Math.ceil(current);\n                            setTimeout(update, 20);\n                        } else {\n                            target.innerText = goal;\n                        }\n                    };\n                    update();\n                    counterObserver.unobserve(target);\n                }\n            });\n        }, { threshold: 0.5 });\n        document.querySelectorAll('.stats-box__number').forEach(n => counterObserver.observe(n));\n    };\n\n    // 8. Контактная форма и капча\n    let captchaRes = 0;\n    const genCaptcha = () => {\n        const n1 = Math.floor(Math.random() * 9) + 1;\n        const n2 = Math.floor(Math.random() * 9) + 1;\n        captchaRes = n1 + n2;\n        const q = document.getElementById('captcha-question');\n        if (q) q.innerText = `${n1} + ${n2} = ?`;\n    };\n\n    const initForm = () => {\n        const form = document.getElementById('contact-form');\n        const phone = document.getElementById('phone-input');\n        if (!form) return;\n\n        phone.addEventListener('input', (e) => e.target.value = e.target.value.replace(/\\D/g, ''));\n\n        form.addEventListener('submit', (e) => {\n            e.preventDefault();\n            const ans = parseInt(document.getElementById('captcha-answer').value);\n            if (ans !== captchaRes) {\n                alert('Капча введена неверно!');\n                genCaptcha();\n                return;\n            }\n            const btn = document.getElementById('submit-btn');\n            btn.disabled = true;\n            btn.innerText = 'Отправка...';\n            setTimeout(() => {\n                form.classList.add('form--hidden');\n                document.getElementById('form-success').classList.add('form-success--active');\n            }, 1500);\n        });\n    };\n\n    // 9. Cookie Popup\n    const initCookies = () => {\n        const popup = document.getElementById('cookie-popup');\n        const acceptBtn = document.getElementById('cookie-accept');\n        \n        if (!localStorage.getItem('xpert_cookies_accepted')) {\n            setTimeout(() => {\n                popup.classList.add('cookie-popup--active');\n            }, 2000);\n        }\n\n        acceptBtn.addEventListener('click', () => {\n            localStorage.setItem('xpert_cookies_accepted', 'true');\n            popup.classList.remove('cookie-popup--active');\n        });\n    };\n\n    // Запуск всех систем\n    initReveal();\n    initParallax();\n    initCardGlow();\n    initCounters();\n    genCaptcha();\n    initForm();\n    initCookies();\n});\n\n// Глобальная функция сброса формы (для кнопки в окне успеха)\nfunction resetForm() {\n    location.reload(); \n}"],"names":["lenis","raf","time","burger","mobileMenu","menuLinks","toggleMenu","link","initReveal","observer","entries","entry","el","initParallax","hero","card","e","x","y","initCardGlow","rect","initCounters","counterObserver","target","goal","current","step","update","n","captchaRes","genCaptcha","n1","n2","q","initForm","form","phone","btn","initCookies","popup","acceptBtn"],"mappings":"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"}